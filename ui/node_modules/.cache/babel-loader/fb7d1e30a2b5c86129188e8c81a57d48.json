{"ast":null,"code":"var _jsxFileName = \"/Users/blainehill/Desktop/Arcane/ui/src/CreatePlaylist.js\";\nimport React from \"react\";\nimport $ from 'jquery';\nimport { Button } from 'react-bootstrap';\nimport Cookies from \"js-cookie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CreatePlaylist = ({\n  seedTracks,\n  recommendations\n}) => {\n  function generatePlaylist(seedTrack_names, recommendation_ids, token_key) {\n    let requestData = {\n      seedTrack_names: seedTrack_names,\n      token: Cookies.get(token_key)\n    };\n    let url;\n\n    if (process.env.NODE_ENV == \"production\") {\n      url = \"/api/createPlaylist\";\n    } else {\n      url = \"http://localhost:3001/api/createPlaylist\";\n    }\n\n    $.ajax({\n      url: url,\n      dataType: 'json',\n      data: requestData,\n      type: \"GET\"\n    }).done(function (response) {\n      if (responseIsSuccess(response)) {\n        let url2;\n\n        if (process.env.NODE_ENV == \"production\") {\n          url2 = \"/api/addTracks\";\n        } else {\n          url2 = \"http://localhost:3001/api/addTracks\";\n        }\n\n        let requestData2 = {\n          recommendation_ids: recommendation_ids,\n          playlist_id: response.data,\n          token: Cookies.get(token_key)\n        };\n        console.log(response.data);\n        $.ajax({\n          url: url2,\n          dataType: 'json',\n          data: requestData2,\n          type: \"GET\"\n        }).done(function () {\n          alert(\"Check out Spotify for your new Arcane Mix!\");\n        });\n      }\n    });\n  }\n\n  function responseIsSuccess(data) {\n    var error;\n\n    if (data && data.status.error == null) {\n      error = data.status;\n    } else {\n      error = data.status.error.response.status || \"401\";\n    }\n\n    var msg = data.message; // if unauthorized we need to prompt log in\n\n    if (error && parseInt(error) == 401) {\n      alert(msg);\n      return false;\n    }\n\n    if (error && error >= 400) {\n      console.log(msg);\n      alert(msg || \"Error: Please try logging in and out again.\");\n      return false;\n    }\n\n    return true;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: recommendations.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        class: \"bg-gray-800\",\n        variant: \"secondary btn-lg\",\n        onClick: () => generatePlaylist(seedTracks.map(track => track.artists[0].name), recommendations.map(track => track.id), 'arcane-token-key'),\n        children: \"Create Playlist!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n};\n\n_c = CreatePlaylist;\nexport default CreatePlaylist;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreatePlaylist\");","map":{"version":3,"sources":["/Users/blainehill/Desktop/Arcane/ui/src/CreatePlaylist.js"],"names":["React","$","Button","Cookies","CreatePlaylist","seedTracks","recommendations","generatePlaylist","seedTrack_names","recommendation_ids","token_key","requestData","token","get","url","process","env","NODE_ENV","ajax","dataType","data","type","done","response","responseIsSuccess","url2","requestData2","playlist_id","console","log","alert","error","status","msg","message","parseInt","length","map","track","artists","name","id"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport $ from 'jquery';\nimport { Button } from 'react-bootstrap';\nimport Cookies from \"js-cookie\";\n\n\nconst CreatePlaylist= ({ seedTracks, recommendations }) => {\n\n    function generatePlaylist(seedTrack_names, recommendation_ids, token_key) {\n        \n        let requestData = {\n            seedTrack_names: seedTrack_names,\n            token: Cookies.get(token_key)\n        };\n\n        let url;\n        if (process.env.NODE_ENV == \"production\") {\n            url = \"/api/createPlaylist\";\n        } else {\n            url = \"http://localhost:3001/api/createPlaylist\";\n        }\n\n        $.ajax({\n            url: url,\n            dataType : 'json',\n            data: requestData,\n            type: \"GET\"\n        }).done(function (response) {\n            if (responseIsSuccess(response)) {\n\n                let url2;\n                if (process.env.NODE_ENV == \"production\") {\n                    url2 = \"/api/addTracks\";\n                } else {\n                    url2 = \"http://localhost:3001/api/addTracks\";\n                }\n\n\n                let requestData2 ={\n                    recommendation_ids: recommendation_ids,\n                    playlist_id: response.data,\n                    token: Cookies.get(token_key)\n                }\n                console.log(response.data);\n\n                $.ajax({\n                    url: url2,\n                    dataType : 'json',\n                    data: requestData2,\n                    type: \"GET\"\n                }).done(function(){\n                    alert(\"Check out Spotify for your new Arcane Mix!\");\n                })\n            }\n        });\n    }\n\n\n    function responseIsSuccess(data) {\n        var error;\n        if (data && data.status.error == null) {\n            error = data.status;\n        } else {\n            error = data.status.error.response.status || \"401\";\n        }\n\n        var msg = data.message;\n        // if unauthorized we need to prompt log in\n        if (error && parseInt(error) == 401) {\n            alert(msg);\n            return false;\n        }\n        if (error && error >= 400) {\n            console.log(msg);\n            alert(msg || \"Error: Please try logging in and out again.\");\n            return false;\n        }\n        return true;\n    }\n\n\n\n    return(\n        <div>\n            { recommendations.length > 0 &&\n            <div>\n                <br />\n                <Button class=\"bg-gray-800\" variant=\"secondary btn-lg\" onClick={() => generatePlaylist(seedTracks.map( track => track.artists[0].name), recommendations.map( track => track.id), 'arcane-token-key')}>\n                    Create Playlist!\n                </Button>\n                <br />\n                <br />\n            </div>\n            }       \n        </div>\n        );\n}\n\nexport default CreatePlaylist;"]},"metadata":{},"sourceType":"module"}