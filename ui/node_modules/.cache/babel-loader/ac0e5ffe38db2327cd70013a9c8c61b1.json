{"ast":null,"code":"import _toConsumableArray from\"/Users/blainehill/Desktop/Arcane/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/blainehill/Desktop/Arcane/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useHistory,useLocation}from\"react-router-dom\";import Welcome from'./Welcome';import SearchTrack from'./SearchTrack';import DisplaySeeds from'./DisplaySeeds';import DisplayRecommendations from'./DisplayRecommendations';import CreatePlaylist from'./CreatePlaylist';import Cookies from\"js-cookie\";import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _=require('underscore');//FIX the url so the access token isn't visible\n//add blurb saying how Arcane will use Cookies and by using the website, you agree to abide by it.\n//we will have a logout button at the top when we're logged in and we will \n//remove the login and introductory information once we are logged in\n//add green containers around everything\n//make Title area better\n//add acknowledgements at the bottom\n//<a target=\"_blank\" href=\"undefined/icons/set/earbud-headphones\">Earbud Headphones icon</a> icon by <a target=\"_blank\" href=\"\">Icons8</a>\n//https://www.heropatterns.com/\nfunction App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),seedTracks=_useState2[0],setSeedTracks=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),recommendations=_useState4[0],setRecommendations=_useState4[1];var token_key='arcane-token-key';var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),hasLoggedIn=_useState6[0],setHasLoggedIn=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),background=_useState8[0],setBackground=_useState8[1];var history=useHistory();var updateSeeds=function updateSeeds(trackArray,newTrack){trackArray.push(newTrack);setSeedTracks(_toConsumableArray(trackArray));};var deleteSeed=function deleteSeed(trackArray,trackToBeDeleted){trackArray=_.without(trackArray,trackToBeDeleted);setSeedTracks(_toConsumableArray(trackArray));};var updateRecommendations=function updateRecommendations(trackArray,newTrack){trackArray.push(newTrack);setRecommendations(_toConsumableArray(trackArray));};var deleteRecommendation=function deleteRecommendation(trackArray,trackToBeDeleted){trackArray=_.without(trackArray,trackToBeDeleted);setRecommendations(_toConsumableArray(trackArray));};var clearRecommendations=function clearRecommendations(trackArray){var length=recommendations.length;for(var i=0;i<length;i++){trackArray.pop();}setRecommendations(_toConsumableArray(trackArray));};function checkForToken(){if(Cookies.get(token_key)==undefined||Cookies.get(token_key)==null){return false;}else{return true;}}function updateHasLoggedIn(){if(Cookies.get(token_key)==undefined||Cookies.get(token_key)==null){setHasLoggedIn(false);history.replace(\"/\");}else{setHasLoggedIn(true);history.replace({search:\"\"});}}function getHashParams(){var hashParams={};var e,r=/([^&;=]+)=?([^&;]*)/g,q=window.location.hash.substring(1);while(e=r.exec(q)){hashParams[e[1]]=decodeURIComponent(e[2]);}return hashParams;}function setCookie(){Cookies.remove(token_key);var params=getHashParams();if(params.access_token!=null&&params.access_token!=''){Cookies.set(token_key,params.access_token,{expires:3599/86400});//set the cookie to expire after 59 min and 59 sec \n}}function getRandomInt(max){return Math.floor(Math.random()*max);}function generateBackground(){if(background==\"\"){var randomNumber=getRandomInt(40);var backgroundClassname=\"App-background\"+randomNumber.toString();//console.log(backgroundClassname);\nsetBackground(backgroundClassname);}return background;}useEffect(function(){if(!hasLoggedIn){Cookies.remove(token_key);}updateHasLoggedIn();var params=getHashParams();var bool=false;if(params.access_token!=null&&params.access_token!=''){bool=true;}if(checkForToken()==false&&bool==true){setCookie();}updateHasLoggedIn();//console.log(hasLoggedIn);\n},[]);var content=/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"w-11/12\",children:[/*#__PURE__*/_jsx(Welcome,{hasLoggedIn:hasLoggedIn,setHasLoggedIn:setHasLoggedIn}),/*#__PURE__*/_jsx(SearchTrack,{seedTracks:seedTracks,updateSeeds:updateSeeds}),/*#__PURE__*/_jsx(DisplaySeeds,{seedTracks:seedTracks,deleteSeed:deleteSeed}),/*#__PURE__*/_jsx(DisplayRecommendations,{seedTracks:seedTracks,recommendations:recommendations,updateRecommendations:updateRecommendations,deleteRecommendation:deleteRecommendation,clearRecommendations:clearRecommendations}),/*#__PURE__*/_jsx(CreatePlaylist,{seedTracks:seedTracks,recommendations:recommendations})]})});return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"div\",{className:generateBackground(),children:content})});}export default App;","map":{"version":3,"sources":["/Users/blainehill/Desktop/Arcane/ui/src/App.js"],"names":["React","useEffect","useState","useHistory","useLocation","Welcome","SearchTrack","DisplaySeeds","DisplayRecommendations","CreatePlaylist","Cookies","_","require","App","seedTracks","setSeedTracks","recommendations","setRecommendations","token_key","hasLoggedIn","setHasLoggedIn","background","setBackground","history","updateSeeds","trackArray","newTrack","push","deleteSeed","trackToBeDeleted","without","updateRecommendations","deleteRecommendation","clearRecommendations","length","i","pop","checkForToken","get","undefined","updateHasLoggedIn","replace","search","getHashParams","hashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","setCookie","remove","params","access_token","set","expires","getRandomInt","max","Math","floor","random","generateBackground","randomNumber","backgroundClassname","toString","bool","content"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {useHistory, useLocation} from \"react-router-dom\";\nimport Welcome from './Welcome';\nimport SearchTrack from './SearchTrack';\nimport DisplaySeeds from './DisplaySeeds';\nimport DisplayRecommendations from './DisplayRecommendations';\nimport CreatePlaylist from './CreatePlaylist'\nimport Cookies from \"js-cookie\";\nimport './App.css'; \nvar _ = require('underscore');\n\n//FIX the url so the access token isn't visible\n\n//add blurb saying how Arcane will use Cookies and by using the website, you agree to abide by it.\n\n//we will have a logout button at the top when we're logged in and we will \n//remove the login and introductory information once we are logged in\n\n//add green containers around everything\n\n//make Title area better\n\n//add acknowledgements at the bottom\n//<a target=\"_blank\" href=\"undefined/icons/set/earbud-headphones\">Earbud Headphones icon</a> icon by <a target=\"_blank\" href=\"\">Icons8</a>\n//https://www.heropatterns.com/\n\n\nfunction App() {\n\n  const[seedTracks, setSeedTracks] = useState([]);\n  const[recommendations, setRecommendations] = useState([]);\n  const token_key = 'arcane-token-key';\n  const[hasLoggedIn, setHasLoggedIn] = useState(false);\n  const[background, setBackground] = useState(\"\");\n  const history = useHistory();\n\n\n  const updateSeeds = (trackArray, newTrack) => {\n    trackArray.push(newTrack);\n    setSeedTracks([...trackArray]);\n  }\n\n  const deleteSeed = (trackArray, trackToBeDeleted) => {\n    trackArray = _.without(trackArray, trackToBeDeleted);\n    setSeedTracks([...trackArray]);\n  }\n\n  const updateRecommendations = (trackArray, newTrack) => {\n    trackArray.push(newTrack);\n    setRecommendations([...trackArray]);\n  }\n\n  const deleteRecommendation = (trackArray, trackToBeDeleted) => {\n    trackArray = _.without(trackArray, trackToBeDeleted);\n    setRecommendations([...trackArray]);\n  }\n\n  const clearRecommendations = (trackArray) => {\n    let length = recommendations.length;\n    for(let i = 0; i < length; i++){\n      trackArray.pop();\n    }\n    setRecommendations([...trackArray]);\n  }\n\n  function checkForToken(){\n      if(Cookies.get(token_key) == undefined || Cookies.get(token_key) == null){\n        return false;\n      }\n      else{\n        return true;\n      }\n  }\n  function updateHasLoggedIn(){\n    if(Cookies.get(token_key) == undefined || Cookies.get(token_key) == null){\n      setHasLoggedIn(false);\n      history.replace(\"/\");\n    }\n    else{\n      setHasLoggedIn(true);\n      history.replace({search: \"\"});\n    }\n  }\n\n  function getHashParams() {\n    var hashParams = {};\n    var e, r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n    while ( e = r.exec(q)) {\n      hashParams[e[1]] = decodeURIComponent(e[2]);\n    }\n    return hashParams;\n  }\n\n  function setCookie(){\n      Cookies.remove(token_key);\n      var params = getHashParams();\n      if(params.access_token != null && params.access_token != ''){\n          Cookies.set(token_key, params.access_token, { expires: 3599/86400 }) //set the cookie to expire after 59 min and 59 sec \n      }\n  }\n\n  function getRandomInt(max) {\n    return Math.floor(Math.random() * max);\n  }\n\n  function generateBackground(){\n    if(background == \"\"){\n      let randomNumber = getRandomInt(40);\n      let backgroundClassname = \"App-background\" + randomNumber.toString();\n      //console.log(backgroundClassname);\n      setBackground(backgroundClassname);\n    }\n    return background;\n  }\n\n  useEffect(() => {\n    if(!hasLoggedIn){\n      Cookies.remove(token_key);\n    }\n    updateHasLoggedIn();\n    var params = getHashParams();\n    let bool = false;\n    if(params.access_token != null && params.access_token != ''){\n      bool = true;\n      \n    }\n    if(checkForToken() == false && bool == true){\n      setCookie();\n    }\n    updateHasLoggedIn();\n    //console.log(hasLoggedIn);\n  }, []);\n  \n  const content = (\n    <header className=\"App-header\">\n      <div class=\"w-11/12\">\n          <Welcome  hasLoggedIn={hasLoggedIn} setHasLoggedIn={setHasLoggedIn}/>\n          <SearchTrack seedTracks={seedTracks} updateSeeds={updateSeeds}/>\n          <DisplaySeeds seedTracks={seedTracks} deleteSeed={deleteSeed}/>\n          <DisplayRecommendations seedTracks={seedTracks} recommendations={recommendations} updateRecommendations={updateRecommendations} deleteRecommendation={deleteRecommendation} clearRecommendations={clearRecommendations}/>\n          <CreatePlaylist seedTracks={seedTracks} recommendations={recommendations}/>\n        </div>\n      </header>\n  );\n\n\n  return (\n    <div className=\"App\">\n      <div className={generateBackground()}>\n        {content}\n      </div>\n    </div>\n    \n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}