{"ast":null,"code":"import React from\"react\";import $ from'jquery';import{Button}from'react-bootstrap';import Cookies from\"js-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreatePlaylist=function CreatePlaylist(_ref){var seedTracks=_ref.seedTracks,recommendations=_ref.recommendations;function generatePlaylist(seedTrack_names,recommendation_ids,token_key){var requestData={seedTrack_names:seedTrack_names,token:Cookies.get(token_key)};var url;if(process.env.NODE_ENV==\"production\"){url=\"/api/createPlaylist\";}else{url=\"http://localhost:3001/api/createPlaylist\";}$.ajax({url:url,dataType:'json',data:requestData,type:\"GET\"}).done(function(response){if(responseIsSuccess(response)){var url2;if(process.env.NODE_ENV==\"production\"){url2=\"/api/addTracks\";}else{url2=\"http://localhost:3001/api/addTracks\";}var requestData2={recommendation_ids:recommendation_ids,playlist_id:response.data,token:Cookies.get(token_key)};console.log(response.data);$.ajax({url:url2,dataType:'json',data:requestData2,type:\"GET\"}).done(function(){alert(\"Check out Spotify for your new Arcane Mix!\");});}});}function responseIsSuccess(data){var error;if(data&&data.status.error==null){error=data.status;}else{error=data.status.error.response.status||\"401\";}var msg=data.message;// if unauthorized we need to prompt log in\nif(error&&parseInt(error)==401){alert(msg);return false;}if(error&&error>=400){console.log(msg);alert(msg||\"Error: Please try logging in and out again.\");return false;}return true;}return/*#__PURE__*/_jsx(\"div\",{children:recommendations.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{class:\"bg-gray-800\",variant:\"secondary btn-lg\",onClick:function onClick(){return generatePlaylist(seedTracks.map(function(track){return track.artists[0].name;}),recommendations.map(function(track){return track.id;}),'arcane-token-key');},children:\"Create Playlist!\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]})});};export default CreatePlaylist;","map":{"version":3,"sources":["/Users/blainehill/Desktop/Arcane/ui/src/CreatePlaylist.js"],"names":["React","$","Button","Cookies","CreatePlaylist","seedTracks","recommendations","generatePlaylist","seedTrack_names","recommendation_ids","token_key","requestData","token","get","url","process","env","NODE_ENV","ajax","dataType","data","type","done","response","responseIsSuccess","url2","requestData2","playlist_id","console","log","alert","error","status","msg","message","parseInt","length","map","track","artists","name","id"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport $ from 'jquery';\nimport { Button } from 'react-bootstrap';\nimport Cookies from \"js-cookie\";\n\n\nconst CreatePlaylist= ({ seedTracks, recommendations }) => {\n\n    function generatePlaylist(seedTrack_names, recommendation_ids, token_key) {\n        \n        let requestData = {\n            seedTrack_names: seedTrack_names,\n            token: Cookies.get(token_key)\n        };\n\n        let url;\n        if (process.env.NODE_ENV == \"production\") {\n            url = \"/api/createPlaylist\";\n        } else {\n            url = \"http://localhost:3001/api/createPlaylist\";\n        }\n\n        $.ajax({\n            url: url,\n            dataType : 'json',\n            data: requestData,\n            type: \"GET\"\n        }).done(function (response) {\n            if (responseIsSuccess(response)) {\n\n                let url2;\n                if (process.env.NODE_ENV == \"production\") {\n                    url2 = \"/api/addTracks\";\n                } else {\n                    url2 = \"http://localhost:3001/api/addTracks\";\n                }\n\n\n                let requestData2 ={\n                    recommendation_ids: recommendation_ids,\n                    playlist_id: response.data,\n                    token: Cookies.get(token_key)\n                }\n                console.log(response.data);\n\n                $.ajax({\n                    url: url2,\n                    dataType : 'json',\n                    data: requestData2,\n                    type: \"GET\"\n                }).done(function(){\n                    alert(\"Check out Spotify for your new Arcane Mix!\");\n                })\n            }\n        });\n    }\n\n\n    function responseIsSuccess(data) {\n        var error;\n        if (data && data.status.error == null) {\n            error = data.status;\n        } else {\n            error = data.status.error.response.status || \"401\";\n        }\n\n        var msg = data.message;\n        // if unauthorized we need to prompt log in\n        if (error && parseInt(error) == 401) {\n            alert(msg);\n            return false;\n        }\n        if (error && error >= 400) {\n            console.log(msg);\n            alert(msg || \"Error: Please try logging in and out again.\");\n            return false;\n        }\n        return true;\n    }\n\n\n\n    return(\n        <div>\n            { recommendations.length > 0 &&\n            <div>\n                <br />\n                <Button class=\"bg-gray-800\" variant=\"secondary btn-lg\" onClick={() => generatePlaylist(seedTracks.map( track => track.artists[0].name), recommendations.map( track => track.id), 'arcane-token-key')}>\n                    Create Playlist!\n                </Button>\n                <br />\n                <br />\n            </div>\n            }       \n        </div>\n        );\n}\n\nexport default CreatePlaylist;"]},"metadata":{},"sourceType":"module"}