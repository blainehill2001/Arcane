{"ast":null,"code":"var _jsxFileName = \"/Users/blainehill/Desktop/Arcane/ui/src/SearchTrack.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport $ from 'jquery';\nimport { Form, InputGroup, Button } from 'react-bootstrap';\nimport Cookies from \"js-cookie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SearchTrack = ({\n  seedTracks,\n  updateSeeds,\n  hasLoggedIn\n}) => {\n  _s();\n\n  const {\n    handleSubmit\n  } = useForm();\n  const [trackQuery, setTrackQuery] = useState('');\n  const [tracks, setTracks] = useState([]);\n  const [searched, setSearched] = useState(false);\n\n  function handleChange(event) {\n    setTrackQuery({ ...trackQuery,\n      [event.target.name]: event.target.value\n    });\n  }\n\n  const onSubmit = () => {\n    setSearched(true);\n    searchTrackByName(trackQuery.query, 'arcane-token-key');\n  };\n\n  function searchTrackByName(track_name, token_key) {\n    let url;\n\n    if (process.env.NODE_ENV == \"production\") {\n      url = \"/api/trackSearch\";\n    } else {\n      url = \"http://localhost:3001/api/trackSearch\";\n    }\n\n    $.ajax({\n      url: url,\n      data: {\n        track_value: track_name,\n        token: Cookies.get(token_key),\n        limit: \"5\",\n        type: \"GET\"\n      }\n    }).done(function (data) {\n      if (responseIsSuccess(data)) {\n        setTracks(data.trackResult.tracks.items);\n      }\n    });\n  }\n\n  function responseIsSuccess(data) {\n    var error;\n\n    if (data && data.status.error == null) {\n      error = data.status;\n    } else {\n      error = data.status.error.response.status || \"401\";\n    }\n\n    var msg = data.message; // if unauthorized we need to prompt log in\n\n    if (error && parseInt(error) == 401) {\n      alert(msg);\n      return false;\n    }\n\n    if (error && error >= 400) {\n      console.log(msg);\n      alert(msg || \"Error: Please try logging in and out again.\");\n      return false;\n    }\n\n    return true;\n  }\n\n  function addTracktoSeeds(track) {\n    let isDuplicate = false;\n    seedTracks.forEach(seedTrack => {\n      if (seedTrack.id == track.id) {\n        isDuplicate = true;\n      }\n    });\n\n    if (seedTracks.length < 5 && isDuplicate == false) {\n      updateSeeds(seedTracks, track);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: hasLoggedIn == true && /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"mx-auto my-4 px-4 py-4 ring ring-transparent rounded-lg bg-green-700\",\n      children: [/*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: handleSubmit(onSubmit),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Search for your top tracks:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            class: \"text-xs sm:text-sm md:text-base lg:text-lg p-2\",\n            children: \"Select a track below to add it to your recommendation seeds:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n              required: true,\n              id: \"validationTrack\",\n              class: \"p-12\",\n              name: \"query\",\n              placeholder: \"Enter track name\",\n              defaultValue: '',\n              autoComplete: \"on\",\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(InputGroup.Append, {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                class: \"bg-gray-800\",\n                type: \"submit\",\n                defaultValue: \"Submit\",\n                variant: \"secondary\",\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }, this), searched == true && /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"flex flex-row flex-wrap\",\n        children: tracks.map(track => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"container mx-auto w-1/2 lg:w-1/5 md:w-1/3 p-3\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"object-cover w-full h-full p-4 ring ring-transparent rounded-lg bg-green-800 hover:bg-blue-500 active:bg-indigo-800\",\n              onClick: () => addTracktoSeeds(track),\n              name: track.name,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"flex flex-row flex-wrap justify-around\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: track.album.images[0].url\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  class: \"p-1 text-xs sm:text-sm md:text-base lg:text-lg\",\n                  children: [track.name, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 111,\n                    columnNumber: 120\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                    children: [\"by \", track.artists[0].name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 111,\n                    columnNumber: 127\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 45\n              }, this)\n            }, track.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 37\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SearchTrack, \"sR0f9SQtJfurWjUxkprMzv+qlV4=\", false, function () {\n  return [useForm];\n});\n\n_c = SearchTrack;\nexport default SearchTrack;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchTrack\");","map":{"version":3,"sources":["/Users/blainehill/Desktop/Arcane/ui/src/SearchTrack.js"],"names":["React","useState","useForm","$","Form","InputGroup","Button","Cookies","SearchTrack","seedTracks","updateSeeds","hasLoggedIn","handleSubmit","trackQuery","setTrackQuery","tracks","setTracks","searched","setSearched","handleChange","event","target","name","value","onSubmit","searchTrackByName","query","track_name","token_key","url","process","env","NODE_ENV","ajax","data","track_value","token","get","limit","type","done","responseIsSuccess","trackResult","items","error","status","response","msg","message","parseInt","alert","console","log","addTracktoSeeds","track","isDuplicate","forEach","seedTrack","id","length","map","album","images","artists"],"mappings":"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","sourcesContent":["  \nimport React, { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport $ from 'jquery';\nimport { Form, InputGroup, Button } from 'react-bootstrap';\nimport Cookies from \"js-cookie\";\n\n\nconst SearchTrack = ({ seedTracks, updateSeeds, hasLoggedIn}) => {\n\n    const { handleSubmit} = useForm();\n    const [trackQuery, setTrackQuery] = useState('');\n    const [tracks, setTracks] = useState([]);\n    const [searched, setSearched] = useState(false);\n\n    function handleChange(event) {\n        setTrackQuery({...trackQuery, [event.target.name]: event.target.value})\n    }\n\n    const onSubmit = () => {\n        setSearched(true);\n        searchTrackByName(trackQuery.query, 'arcane-token-key');\n    }\n\n    function searchTrackByName(track_name, token_key) {\n\n        let url;\n        if (process.env.NODE_ENV == \"production\") {\n            url = \"/api/trackSearch\";\n        } else {\n            url = \"http://localhost:3001/api/trackSearch\";\n        }\n\n        $.ajax({\n            url: url,\n            data: {\n                track_value: track_name,\n                token: Cookies.get(token_key),\n                limit: \"5\",\n                type: \"GET\"\n            }\n        }).done(function (data) {\n            if (responseIsSuccess(data)) {\n                setTracks(data.trackResult.tracks.items);\n            }\n        });\n    }\n\n    function responseIsSuccess(data) {\n        var error;\n        if (data && data.status.error == null) {\n            error = data.status;\n        } else {\n            error = data.status.error.response.status || \"401\";\n        }\n\n        var msg = data.message;\n        // if unauthorized we need to prompt log in\n        if (error && parseInt(error) == 401) {\n            alert(msg);\n            return false;\n        }\n        if (error && error >= 400) {\n            console.log(msg);\n            alert(msg || \"Error: Please try logging in and out again.\");\n            return false;\n        }\n        return true;\n    }\n\n    function addTracktoSeeds(track){\n        let isDuplicate = false;\n        seedTracks.forEach((seedTrack) => {if(seedTrack.id == track.id){\n            isDuplicate = true;\n        }});\n        if(seedTracks.length < 5 && isDuplicate == false){\n            updateSeeds(seedTracks, track);\n        }\n        \n        \n    }\n\n\n    return(\n        <div>\n            {hasLoggedIn == true &&\n                <div class=\"mx-auto my-4 px-4 py-4 ring ring-transparent rounded-lg bg-green-700\">\n                    <Form onSubmit={handleSubmit(onSubmit)}>\n                        <div class=\"flex flex-col\">\n                            \n                            <h4>Search for your top tracks:</h4>\n                            <p class=\"text-xs sm:text-sm md:text-base lg:text-lg p-2\">Select a track below to add it to your recommendation seeds:</p>\n\n                            <InputGroup className=\"mb-3\">\n                                <Form.Control required id=\"validationTrack\" class=\"p-12\" name=\"query\" placeholder=\"Enter track name\" defaultValue={''} autoComplete=\"on\" onChange={handleChange}/>\n                                <InputGroup.Append>\n                                <Button class=\"bg-gray-800\" type=\"submit\" defaultValue=\"Submit\" variant=\"secondary\">Submit</Button>\n                                </InputGroup.Append>\n                            </InputGroup>\n                        </div>\n                    </Form>\n                    \n                    {searched == true && \n                        <div class=\"flex flex-row flex-wrap\">\n                            {tracks.map((track) => {\n                                return(\n                                    <div class=\"container mx-auto w-1/2 lg:w-1/5 md:w-1/3 p-3\">\n                                        <button class=\"object-cover w-full h-full p-4 ring ring-transparent rounded-lg bg-green-800 hover:bg-blue-500 active:bg-indigo-800\" key={track.id} onClick={() => addTracktoSeeds(track)} name={track.name}>   \n                                            <div class=\"flex flex-row flex-wrap justify-around\">\n                                                <img src={track.album.images[0].url} />\n                                                <p class=\"p-1 text-xs sm:text-sm md:text-base lg:text-lg\">{track.name} <br /> <i>by {track.artists[0].name}</i></p>\n                                            </div>\n                                        </button>\n                                    </div>\n                                    );\n                                })}\n                        </div>\n                    }\n                </div>\n            }\n        </div>\n    );\n}\n\n\nexport default SearchTrack;"]},"metadata":{},"sourceType":"module"}