{"ast":null,"code":"import _defineProperty from\"/Users/blainehill/Desktop/Arcane/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/blainehill/Desktop/Arcane/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/blainehill/Desktop/Arcane/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useForm}from\"react-hook-form\";import $ from'jquery';import{Form,InputGroup,Button}from'react-bootstrap';import Cookies from\"js-cookie\";import DisplayRecommendations from\"./DisplayRecommendations\";import{forEach}from'core-js/es/array';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchTrack=function SearchTrack(_ref){var seedTracks=_ref.seedTracks,updateSeeds=_ref.updateSeeds;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch,errors=_useForm.errors;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),trackQuery=_useState2[0],setTrackQuery=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tracks=_useState4[0],setTracks=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),searched=_useState6[0],setSearched=_useState6[1];function handleChange(event){setTrackQuery(_objectSpread(_objectSpread({},trackQuery),{},_defineProperty({},event.target.name,event.target.value)));}var onSubmit=function onSubmit(){setSearched(true);searchTrackByName(trackQuery.query,'arcane-token-key');};function searchTrackByName(track_name,token_key){var url;if(process.env.NODE_ENV==\"production\"){url=\"/api/trackSearch\";}else{url=\"http://localhost:3001/api/trackSearch\";}$.ajax({url:url,data:{track_value:track_name,token:Cookies.get(token_key),limit:\"5\",type:\"GET\"}}).done(function(data){if(responseIsSuccess(data)){setTracks(data.trackResult.tracks.items);}});}function responseIsSuccess(data){var error;if(data&&data.status.error==null){error=data.status;}else{error=data.status.error.response.status||\"401\";}var msg=data.message;// if unauthorized we need to prompt log in\nif(error&&parseInt(error)==401){alert(msg);return false;}if(error&&error>=400){console.log(msg);alert(msg||\"Error: Please try logging in and out again.\");return false;}return true;}function addTracktoSeeds(track){var isDuplicate=false;seedTracks.forEach(function(seedTrack){if(seedTrack.id==track.id){isDuplicate=true;}});if(seedTracks.length<5&&isDuplicate==false){updateSeeds(seedTracks,track);}}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Form,{onSubmit:handleSubmit(onSubmit),children:/*#__PURE__*/_jsxs(\"div\",{class:\"flex flex-col m-10\",children:[/*#__PURE__*/_jsx(Form.Label,{class:\"py-1\",children:\"Search for your top tracks:\"}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted py-1\",children:\"Select a track below to add it to your recommendation seeds\"}),/*#__PURE__*/_jsxs(InputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Control,{required:true,id:\"validationTrack\",class:\"p-12\",name:\"query\",placeholder:\"Enter track name\",defaultValue:'',autoComplete:\"on\",onChange:handleChange}),/*#__PURE__*/_jsx(InputGroup.Append,{children:/*#__PURE__*/_jsx(Button,{class:\"bg-gray-800\",type:\"submit\",defaultValue:\"Submit\",variant:\"secondary\",children:\"Submit\"})})]})]})}),searched==true&&/*#__PURE__*/_jsx(\"div\",{class:\"flex flex-row flex-wrap mx-8 my-4 px-4 py-4 ring ring-transparent rounded-lg bg-green-700\",children:tracks.map(function(track){return/*#__PURE__*/_jsx(\"div\",{class:\"container mx-auto w-1/2 lg:w-1/5 md:w-1/3 p-3\",children:/*#__PURE__*/_jsxs(\"button\",{class:\"object-cover w-full h-full p-4 ring ring-transparent rounded-lg bg-green-800 hover:bg-blue-500 active:bg-indigo-800\",onClick:function onClick(){return addTracktoSeeds(track);},name:track.name,children:[/*#__PURE__*/_jsx(\"img\",{src:track.album.images[0].url}),/*#__PURE__*/_jsxs(\"p\",{class:\"text-xs sm:text-sm md:text-base lg:text-lg\",children:[track.name,\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsxs(\"i\",{children:[\"by \",track.artists[0].name]})]})]},track.id)});})})]});};export default SearchTrack;//flex flex-row flex-wrap mx-8 my-4 px-4 py-4 ring rounded-lg bg-green-700\n//mx-auto w-1/5 p-3","map":{"version":3,"sources":["/Users/blainehill/Desktop/Arcane/ui/src/SearchTrack.js"],"names":["React","useState","useForm","$","Form","InputGroup","Button","Cookies","DisplayRecommendations","forEach","SearchTrack","seedTracks","updateSeeds","register","handleSubmit","watch","errors","trackQuery","setTrackQuery","tracks","setTracks","searched","setSearched","handleChange","event","target","name","value","onSubmit","searchTrackByName","query","track_name","token_key","url","process","env","NODE_ENV","ajax","data","track_value","token","get","limit","type","done","responseIsSuccess","trackResult","items","error","status","response","msg","message","parseInt","alert","console","log","addTracktoSeeds","track","isDuplicate","seedTrack","id","length","map","album","images","artists"],"mappings":"+cACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,OAAT,KAAwB,iBAAxB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,OAASC,IAAT,CAAeC,UAAf,CAA2BC,MAA3B,KAAyC,iBAAzC,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,sBAAP,KAAmC,0BAAnC,CACA,OAASC,OAAT,KAAwB,kBAAxB,C,wFAGA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAgC,IAA7BC,CAAAA,UAA6B,MAA7BA,UAA6B,CAAjBC,WAAiB,MAAjBA,WAAiB,CAEhD,aAAkDV,OAAO,EAAzD,CAAQW,QAAR,UAAQA,QAAR,CAAkBC,YAAlB,UAAkBA,YAAlB,CAAgCC,KAAhC,UAAgCA,KAAhC,CAAuCC,MAAvC,UAAuCA,MAAvC,CACA,cAAoCf,QAAQ,CAAC,EAAD,CAA5C,wCAAOgB,UAAP,eAAmBC,aAAnB,eACA,eAA4BjB,QAAQ,CAAC,EAAD,CAApC,yCAAOkB,MAAP,eAAeC,SAAf,eACA,eAAgCnB,QAAQ,CAAC,KAAD,CAAxC,yCAAOoB,QAAP,eAAiBC,WAAjB,eAEA,QAASC,CAAAA,YAAT,CAAsBC,KAAtB,CAA6B,CACzBN,aAAa,gCAAKD,UAAL,wBAAkBO,KAAK,CAACC,MAAN,CAAaC,IAA/B,CAAsCF,KAAK,CAACC,MAAN,CAAaE,KAAnD,GAAb,CACH,CAED,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnBN,WAAW,CAAC,IAAD,CAAX,CACAO,iBAAiB,CAACZ,UAAU,CAACa,KAAZ,CAAmB,kBAAnB,CAAjB,CACH,CAHD,CAKA,QAASD,CAAAA,iBAAT,CAA2BE,UAA3B,CAAuCC,SAAvC,CAAkD,CAE9C,GAAIC,CAAAA,GAAJ,CACA,GAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,EAAwB,YAA5B,CAA0C,CACtCH,GAAG,CAAG,kBAAN,CACH,CAFD,IAEO,CACHA,GAAG,CAAG,uCAAN,CACH,CAED9B,CAAC,CAACkC,IAAF,CAAO,CACHJ,GAAG,CAAEA,GADF,CAEHK,IAAI,CAAE,CACFC,WAAW,CAAER,UADX,CAEFS,KAAK,CAAEjC,OAAO,CAACkC,GAAR,CAAYT,SAAZ,CAFL,CAGFU,KAAK,CAAE,GAHL,CAIFC,IAAI,CAAE,KAJJ,CAFH,CAAP,EAQGC,IARH,CAQQ,SAAUN,IAAV,CAAgB,CACpB,GAAIO,iBAAiB,CAACP,IAAD,CAArB,CAA6B,CACzBlB,SAAS,CAACkB,IAAI,CAACQ,WAAL,CAAiB3B,MAAjB,CAAwB4B,KAAzB,CAAT,CACH,CACJ,CAZD,EAaH,CAED,QAASF,CAAAA,iBAAT,CAA2BP,IAA3B,CAAiC,CAC7B,GAAIU,CAAAA,KAAJ,CACA,GAAIV,IAAI,EAAIA,IAAI,CAACW,MAAL,CAAYD,KAAZ,EAAqB,IAAjC,CAAuC,CACnCA,KAAK,CAAGV,IAAI,CAACW,MAAb,CACH,CAFD,IAEO,CACHD,KAAK,CAAGV,IAAI,CAACW,MAAL,CAAYD,KAAZ,CAAkBE,QAAlB,CAA2BD,MAA3B,EAAqC,KAA7C,CACH,CAED,GAAIE,CAAAA,GAAG,CAAGb,IAAI,CAACc,OAAf,CACA;AACA,GAAIJ,KAAK,EAAIK,QAAQ,CAACL,KAAD,CAAR,EAAmB,GAAhC,CAAqC,CACjCM,KAAK,CAACH,GAAD,CAAL,CACA,MAAO,MAAP,CACH,CACD,GAAIH,KAAK,EAAIA,KAAK,EAAI,GAAtB,CAA2B,CACvBO,OAAO,CAACC,GAAR,CAAYL,GAAZ,EACAG,KAAK,CAACH,GAAG,EAAI,6CAAR,CAAL,CACA,MAAO,MAAP,CACH,CACD,MAAO,KAAP,CACH,CAED,QAASM,CAAAA,eAAT,CAAyBC,KAAzB,CAA+B,CAC3B,GAAIC,CAAAA,WAAW,CAAG,KAAlB,CACAhD,UAAU,CAACF,OAAX,CAAmB,SAACmD,SAAD,CAAe,CAAC,GAAGA,SAAS,CAACC,EAAV,EAAgBH,KAAK,CAACG,EAAzB,CAA4B,CAC3DF,WAAW,CAAG,IAAd,CACH,CAAC,CAFF,EAGA,GAAGhD,UAAU,CAACmD,MAAX,CAAoB,CAApB,EAAyBH,WAAW,EAAI,KAA3C,CAAiD,CAC7C/C,WAAW,CAACD,UAAD,CAAa+C,KAAb,CAAX,CACH,CAGJ,CAGD,mBACI,oCACI,KAAC,IAAD,EAAM,QAAQ,CAAE5C,YAAY,CAACc,QAAD,CAA5B,uBACI,aAAK,KAAK,CAAC,oBAAX,wBACI,KAAC,IAAD,CAAM,KAAN,EAAY,KAAK,CAAC,MAAlB,yCADJ,cAEI,KAAC,IAAD,CAAM,IAAN,EAAW,SAAS,CAAC,iBAArB,yEAFJ,cAMI,MAAC,UAAD,EAAY,SAAS,CAAC,MAAtB,wBACI,KAAC,IAAD,CAAM,OAAN,EAAc,QAAQ,KAAtB,CAAuB,EAAE,CAAC,iBAA1B,CAA4C,KAAK,CAAC,MAAlD,CAAyD,IAAI,CAAC,OAA9D,CAAsE,WAAW,CAAC,kBAAlF,CAAqG,YAAY,CAAE,EAAnH,CAAuH,YAAY,CAAC,IAApI,CAAyI,QAAQ,CAAEL,YAAnJ,EADJ,cAEI,KAAC,UAAD,CAAY,MAAZ,wBACA,KAAC,MAAD,EAAQ,KAAK,CAAC,aAAd,CAA4B,IAAI,CAAC,QAAjC,CAA0C,YAAY,CAAC,QAAvD,CAAgE,OAAO,CAAC,WAAxE,oBADA,EAFJ,GANJ,GADJ,EADJ,CAiBKF,QAAQ,EAAI,IAAZ,eACG,YAAK,KAAK,CAAC,2FAAX,UACKF,MAAM,CAAC4C,GAAP,CAAW,SAACL,KAAD,CAAW,CACnB,mBACI,YAAK,KAAK,CAAC,+CAAX,uBACI,gBAAQ,KAAK,CAAC,qHAAd,CAAmJ,OAAO,CAAE,yBAAMD,CAAAA,eAAe,CAACC,KAAD,CAArB,EAA5J,CAA0L,IAAI,CAAEA,KAAK,CAAChC,IAAtM,wBACI,YAAK,GAAG,CAAEgC,KAAK,CAACM,KAAN,CAAYC,MAAZ,CAAmB,CAAnB,EAAsBhC,GAAhC,EADJ,cAEI,WAAG,KAAK,CAAC,4CAAT,WAAuDyB,KAAK,CAAChC,IAA7D,kBAAmE,aAAnE,kBAA0E,2BAAOgC,KAAK,CAACQ,OAAN,CAAc,CAAd,EAAiBxC,IAAxB,GAA1E,GAFJ,GAAyIgC,KAAK,CAACG,EAA/I,CADJ,EADJ,CAQC,CATJ,CADL,EAlBR,GADJ,CAmCH,CA9GD,CAiHA,cAAenD,CAAAA,WAAf,CAEA;AACA","sourcesContent":["  \nimport React, { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport $ from 'jquery';\nimport { Form, InputGroup, Button } from 'react-bootstrap';\nimport Cookies from \"js-cookie\";\nimport DisplayRecommendations from \"./DisplayRecommendations\";\nimport { forEach } from 'core-js/es/array';\n\n\nconst SearchTrack = ({ seedTracks, updateSeeds}) => {\n\n    const { register, handleSubmit, watch, errors } = useForm();\n    const [trackQuery, setTrackQuery] = useState('');\n    const [tracks, setTracks] = useState([]);\n    const [searched, setSearched] = useState(false);\n\n    function handleChange(event) {\n        setTrackQuery({...trackQuery, [event.target.name]: event.target.value})\n    }\n\n    const onSubmit = () => {\n        setSearched(true);\n        searchTrackByName(trackQuery.query, 'arcane-token-key');\n    }\n\n    function searchTrackByName(track_name, token_key) {\n\n        let url;\n        if (process.env.NODE_ENV == \"production\") {\n            url = \"/api/trackSearch\";\n        } else {\n            url = \"http://localhost:3001/api/trackSearch\";\n        }\n\n        $.ajax({\n            url: url,\n            data: {\n                track_value: track_name,\n                token: Cookies.get(token_key),\n                limit: \"5\",\n                type: \"GET\"\n            }\n        }).done(function (data) {\n            if (responseIsSuccess(data)) {\n                setTracks(data.trackResult.tracks.items);\n            }\n        });\n    }\n\n    function responseIsSuccess(data) {\n        var error;\n        if (data && data.status.error == null) {\n            error = data.status;\n        } else {\n            error = data.status.error.response.status || \"401\";\n        }\n\n        var msg = data.message;\n        // if unauthorized we need to prompt log in\n        if (error && parseInt(error) == 401) {\n            alert(msg);\n            return false;\n        }\n        if (error && error >= 400) {\n            console.log(msg);\n            alert(msg || \"Error: Please try logging in and out again.\");\n            return false;\n        }\n        return true;\n    }\n\n    function addTracktoSeeds(track){\n        let isDuplicate = false;\n        seedTracks.forEach((seedTrack) => {if(seedTrack.id == track.id){\n            isDuplicate = true;\n        }});\n        if(seedTracks.length < 5 && isDuplicate == false){\n            updateSeeds(seedTracks, track);\n        }\n        \n        \n    }\n\n\n    return(\n        <div>\n            <Form onSubmit={handleSubmit(onSubmit)}>\n                <div class=\"flex flex-col m-10\">\n                    <Form.Label class=\"py-1\">Search for your top tracks:</Form.Label>\n                    <Form.Text className=\"text-muted py-1\">\n                        Select a track below to add it to your recommendation seeds\n                    </Form.Text>\n\n                    <InputGroup className=\"mb-3\">\n                        <Form.Control required id=\"validationTrack\" class=\"p-12\" name=\"query\" placeholder=\"Enter track name\" defaultValue={''} autoComplete=\"on\" onChange={handleChange}/>\n                        <InputGroup.Append>\n                        <Button class=\"bg-gray-800\" type=\"submit\" defaultValue=\"Submit\" variant=\"secondary\">Submit</Button>\n                        </InputGroup.Append>\n                    </InputGroup>\n                </div>\n            </Form>\n            \n            {searched == true && \n                <div class=\"flex flex-row flex-wrap mx-8 my-4 px-4 py-4 ring ring-transparent rounded-lg bg-green-700\">\n                    {tracks.map((track) => {\n                        return(\n                            <div class=\"container mx-auto w-1/2 lg:w-1/5 md:w-1/3 p-3\">\n                                <button class=\"object-cover w-full h-full p-4 ring ring-transparent rounded-lg bg-green-800 hover:bg-blue-500 active:bg-indigo-800\" key={track.id} onClick={() => addTracktoSeeds(track)} name={track.name}>   \n                                    <img src={track.album.images[0].url} />\n                                    <p class=\"text-xs sm:text-sm md:text-base lg:text-lg\">{track.name} <br /> <i>by {track.artists[0].name}</i></p>\n                                </button>\n                            </div>\n                            );\n                        })}\n                </div>\n            }\n        </div>\n\n    );\n}\n\n\nexport default SearchTrack;\n\n//flex flex-row flex-wrap mx-8 my-4 px-4 py-4 ring rounded-lg bg-green-700\n//mx-auto w-1/5 p-3"]},"metadata":{},"sourceType":"module"}