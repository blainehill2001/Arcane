{"ast":null,"code":"import React from\"react\";import $ from'jquery';import{Button}from'react-bootstrap';import Cookies from\"js-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DisplayRecommendations=function DisplayRecommendations(_ref){var seedTracks=_ref.seedTracks,recommendations=_ref.recommendations,updateRecommendations=_ref.updateRecommendations,deleteRecommendation=_ref.deleteRecommendation,clearRecommendations=_ref.clearRecommendations;function generateRecommendations(seedTracks,token_key){var requestData={limit:\"25\",seed_tracks:seedTracks,token:Cookies.get(token_key)};var url;if(process.env.NODE_ENV==\"production\"){url=\"/api/recommendations\";}else{url=\"http://localhost:3001/api/recommendations\";}$.ajax({url:url,dataType:'json',data:requestData,type:\"POST\"}).done(function(data){if(responseIsSuccess(data)){if(recommendations.length>0){clearRecommendations(recommendations);}data.trackResult.tracks.forEach(function(track){updateRecommendations(recommendations,track);});}});}function responseIsSuccess(data){var error;if(data&&data.status.error==null){error=data.status;}else{error=data.status.error.response.status||\"401\";}var msg=data.message;if(error&&parseInt(error)==401){alert(msg);return false;}if(error&&error>=400){console.log(msg);alert(msg||\"Error: Please try logging in and out again.\");return false;}return true;}return/*#__PURE__*/_jsx(\"div\",{children:seedTracks.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{class:\"bg-gray-800\",variant:\"secondary btn-lg\",onClick:function onClick(){return generateRecommendations(seedTracks.map(function(track){return track.id;}),'arcane-token-key');},children:\"Get Recommendations!\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"div\",{children:recommendations.length>0&&/*#__PURE__*/_jsx(\"div\",{class:\"flex flex-row flex-wrap mx-8 my-4 px-4 py-4 ring ring-transparent rounded-lg bg-green-700\",children:recommendations.map(function(track){return/*#__PURE__*/_jsxs(\"div\",{class:\"container mx-auto w-1/2 lg:w-1/5 md:w-1/3 p-3\",children:[/*#__PURE__*/_jsxs(\"button\",{class:\"object-cover w-full h-full p-4 ring ring-transparent rounded-lg bg-green-800 hover:bg-blue-500 active:bg-indigo-800\",onClick:function onClick(){return deleteRecommendation(recommendations,track);},children:[/*#__PURE__*/_jsx(\"img\",{src:track.album.images[0].url}),/*#__PURE__*/_jsxs(\"p\",{class:\"text-xs sm:text-sm md:text-base lg:text-lg\",children:[track.name,\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsxs(\"i\",{children:[\"by \",track.artists[0].name]})]})]},track.id),/*#__PURE__*/_jsx(\"br\",{})]});})})})]})});};export default DisplayRecommendations;","map":{"version":3,"sources":["/Users/blainehill/Desktop/Arcane/ui/src/DisplayRecommendations.js"],"names":["React","$","Button","Cookies","DisplayRecommendations","seedTracks","recommendations","updateRecommendations","deleteRecommendation","clearRecommendations","generateRecommendations","token_key","requestData","limit","seed_tracks","token","get","url","process","env","NODE_ENV","ajax","dataType","data","type","done","responseIsSuccess","length","trackResult","tracks","forEach","track","error","status","response","msg","message","parseInt","alert","console","log","map","id","album","images","name","artists"],"mappings":"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","sourcesContent":["\nimport React from \"react\";\nimport $ from 'jquery';\nimport { Button } from 'react-bootstrap';\nimport Cookies from \"js-cookie\";\n\n\nconst DisplayRecommendations = ({ seedTracks, recommendations, updateRecommendations, deleteRecommendation, clearRecommendations }) => {\n\n    function generateRecommendations(seedTracks, token_key) {\n        \n        let requestData = {\n            limit: \"25\",\n            seed_tracks: seedTracks,\n            token: Cookies.get(token_key)\n        };\n\n        let url;\n        if (process.env.NODE_ENV == \"production\") {\n            url = \"/api/recommendations\";\n        } else {\n            url = \"http://localhost:3001/api/recommendations\";\n        }\n\n        $.ajax({\n            url: url,\n            dataType : 'json',\n            data: requestData,\n            type: \"POST\"\n        }).done(function (data) {\n            if (responseIsSuccess(data)) {\n                if(recommendations.length > 0){\n                    clearRecommendations(recommendations);\n                }\n                data.trackResult.tracks.forEach((track) => {updateRecommendations(recommendations, track);});\n            }\n        });\n    }\n\n    function responseIsSuccess(data) {\n        var error;\n        if (data && data.status.error == null) {\n            error = data.status;\n        } else {\n            error = data.status.error.response.status || \"401\";\n        }\n\n        var msg = data.message;\n        \n        if (error && parseInt(error) == 401) {\n            alert(msg);\n            return false;\n        }\n        if (error && error >= 400) {\n            console.log(msg);\n            alert(msg || \"Error: Please try logging in and out again.\");\n            return false;\n        }\n        return true;\n    }\n\n    return(\n        <div>\n            {seedTracks.length > 0 &&\n                <div>\n                    <div>\n                        <br />\n                        <Button class=\"bg-gray-800\" variant=\"secondary btn-lg\" onClick={() => generateRecommendations(seedTracks.map( track => track.id), 'arcane-token-key')}>\n                            Get Recommendations!\n                        </Button>\n                        <br />\n                        <br />\n                    </div>\n                    <div>\n                        { recommendations.length > 0 &&\n                            <div class=\"flex flex-row flex-wrap mx-8 my-4 px-4 py-4 ring ring-transparent rounded-lg bg-green-700\">\n                            {recommendations.map((track) => {\n                                return(\n                                    <div class=\"container mx-auto w-1/2 lg:w-1/5 md:w-1/3 p-3\">\n                                        <button class=\"object-cover w-full h-full p-4 ring ring-transparent rounded-lg bg-green-800 hover:bg-blue-500 active:bg-indigo-800\" key={track.id}  onClick={() => deleteRecommendation(recommendations, track)}>   \n                                            <img src={track.album.images[0].url} />\n                                            <p class=\"text-xs sm:text-sm md:text-base lg:text-lg\">{track.name} <br /> <i>by {track.artists[0].name}</i></p>\n                                        </button>\n                                        <br />\n                                    </div>\n                                    );\n                                })}\n                        </div>\n                        }\n                    </div>\n\n                </div>\n            }\n        </div>\n    );\n}\n\nexport default DisplayRecommendations;"]},"metadata":{},"sourceType":"module"}