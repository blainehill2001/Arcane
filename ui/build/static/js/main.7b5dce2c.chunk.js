(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{27:function(e,t,n){},58:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);n(31),n(32);var s=n(0),a=n.n(s),r=n(29),c=n.n(r),i=(n(27),n(58),n(8)),l=n(10),o=n(68),d=n(9),j=n.n(d),u=n.p+"static/media/github.81fc57a4.svg",b=n(1);var x=function(e){var t,n,s=e.hasLoggedIn,a=e.setHasLoggedIn;return t="/api/login",n="http://arcane-spotify.herokuapp.com/",Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{class:"flex flex-wrap flex-1 justify-between flex-row ring ring-transparent p-3",children:[Object(b.jsx)("a",{href:n,children:Object(b.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABmJLR0QA/wD/AP+gvaeTAAAFVklEQVR4nO3aTWxUVRQH8P95bzqlBGeYIaCL0phABamJJECnJWCICCzcqVOqC3ZKDKAp0QTaLp6BThsXJHwl4lIXUMbEnQkYDBIjnRYMLEhVjJHWhTR0xmKgOJ15xwUfMejwvu6b24HzW7b3nXfu/Gfu+wSEEEIIIYQQQgghxJOClFazYCy4s2aVTcZGACtB1ELMi5g4DpAB4CaIx8DGKBjf2Vw+NTUw8qvSHjyK965dYnB5C2ysg8HLwdQEIAawTUxTDFwH4QpAlwy7/M3knJGLsGCr2r+SABLdq18AR7YTuIMJizxsygC+B3CkcLUpi2y2rKIfR+m0mXjuWgcYOwFa62VTYkww8SCZfCy/b+RK0FYCBZDsSbXZNvYR4ZWgjQAYtWHvmsqMnFFQq6LkntRmNnAIwLKgtRj42iSjd7Lv/LDfGr4CWPjhmmdm6owjBLzud8eV0Sfx6Jyu36yzd1RWbexqb7g11z4Ixtsq6wJggL6oA++ayOSue93YcwCJ7lQngKMAkl63dYuB4XK09Opf1sUbKurN27t+YZSKXzGwWkW9CiaJaEe+b2jQy0buA0inzcTSsQEQPvDcmj+jpWjppaAhzNu7fmEdFc8BWK6or0cj+rjw8+Jut8czdwFYGyLzi9MnwllyHikXjzZs8LscNXa1N9xusM+F/M3/H5QtROe8BetsyWmk4VgrnTYTxenPNXz4AJCaKt4+4HfjW3Ptg9X/8AGA04m/pz9DOm06jXQMILl07ACATiV9+ULvxntbX/a6VbI7tSmEA657hDcTzWNHnYY5BsCE99R05J9h02E336YH0mmTgcMhtuTWdqcBzkvQ7LAi2TzueglMNF/bCgXn+dVQKwGAwTvdjyYPY/WqmQAArJu/p+1Zp0Hx3rVLALRVoR8laikAIrK3OA0yuLwFqm8yhqiWAgCA9Y4jbKyrQh/K1FQAZJDz1Szh+Sq0ooyqAMaJ8IZZisTMUiTGxK8B+ElR7QeYucnFsMWq94sQ5xdRUGO8HDVW3rTO5//1ty9jVvu3ZtG+DKBRwT7ui7kY85TC/QEhzy/wL4AIXQ81BwC4aZ3PE/HuoPUf2lu9i0FRpXsMeX6BAzBmIqcr/rOOTgWtr1vY8wv1IMzTpZo5HfRDxfwCB1Cqm6n4OJIiERWPKrUKe37BjwFM/TGr/T9Px2JWexKM/qD1dQt7firOgpaZRftysqd194M1cQabULT7GWhWUF+3UOenIgAAaGSmkygqqjb7hDa/mroSfhxJAJo5BkCMQ9Vo5DF1zGmAYwD5X5p2g3FcTT9PEMbxwtWmHU7DnJegbLZcqG/YBlBWSWNPAsZgob5hm5t3g9wdA6yzpUJmaCuBPsLdF2pFBcQ4VKjPuXonCPB2EOZ8ZsgiUCeASX/tPdZuEHFHvj/3vpfX1z2fBeUzQyfrgJZ7S5L8GgAGY3Amarbk+4Y9L9O+LsTuvQXcsaCnvbXM9n4CNvmpU/MIp42y3Ts5MDLit0SgK+F778VvTu5NrQDhHRvoJODpIDVnPcIfZOMEmfTp5P6h0eDl1KJ4T+sqg42NYH4RhBYQFoExH0AJwO8I+JZyIZN7ZM+J7lTQZfFH3H3KFQHhTzAmwLgC8CWb6czUQO4HKFx6Vd0Luo+n+oYvALhQaYCCDyhUhUyuqg/15VaEZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAZhKAEEIIIYQQQgghhBBV8g9ZeqT3FcjxFQAAAABJRU5ErkJggg=="})}),Object(b.jsx)("a",{href:"https://github.com/blainehill2001/Arcane",class:"my-auto",children:Object(b.jsx)("img",{src:u})})]}),s?Object(b.jsx)("div",{children:Object(b.jsx)("div",{class:"flex flex-column justify-center items-center",children:Object(b.jsx)("div",{class:"mx-auto px-3 py-3 ring ring-transparent rounded-lg bg-green-700",children:Object(b.jsx)(o.a,{class:"bg-gray-800",variant:"secondary btn-lg",onClick:function(){j.a.remove("arcane-token-key"),j.a.remove("spotify_auth_state"),a(!1)},children:Object(b.jsx)("a",{href:n,children:"Log out of Spotify"})})})})}):Object(b.jsx)("div",{class:"flex flex-column justify-center items-center",children:Object(b.jsxs)("div",{class:"mx-10 sm:mx-20 md:mx-30 lg:mx-40 px-3 py-3 ring ring-transparent rounded-lg bg-green-700",children:[Object(b.jsx)("h2",{children:"Welcome to Arcane!"}),Object(b.jsx)("p",{class:"p-3 text-xs sm:text-sm md:text-base",children:"Here's how it works: login with your Spotify account. Then, select up to five of your favorite songs to be the seeds for your curated mix. Then plug in some headphones and enjoy your own Arcane experience!"}),Object(b.jsx)("a",{href:t,children:Object(b.jsx)(o.a,{class:"bg-gray-800",variant:"secondary btn-lg",children:"Log in with Spotify!"})}),Object(b.jsxs)("div",{class:"py-3 px-5 flex flex-row flex-auto flex-wrap justify-between text-super-duper-small sm:text-super-small md:text-xs lg:text-sm",children:[Object(b.jsx)("a",{href:"https://icons8.com/",children:"Icons by Icons8"}),Object(b.jsx)("a",{children:"By using this app, you consent to cookie usage to generate awesome music!"}),Object(b.jsx)("a",{href:"https://www.heropatterns.com/",children:"Backgrounds by Hero Patterns"})]})]})})]})},g=n(11),h=n(3),m=n(30),f=n(13),p=n.n(f),O=n(67),A=n(66),v=function(e){var t=e.seedTracks,n=e.updateSeeds,a=e.hasLoggedIn,r=Object(m.a)().handleSubmit,c=Object(s.useState)(""),i=Object(l.a)(c,2),d=i[0],u=i[1],x=Object(s.useState)([]),f=Object(l.a)(x,2),v=f[0],y=f[1],w=Object(s.useState)(!1),k=Object(l.a)(w,2),K=k[0],Z=k[1];return Object(b.jsx)("div",{children:1==a&&Object(b.jsxs)("div",{class:"mx-auto my-4 px-4 py-4 ring ring-transparent rounded-lg bg-green-700",children:[Object(b.jsx)(O.a,{onSubmit:r((function(){Z(!0),function(e,t){var n;n="/api/trackSearch";p.a.ajax({url:n,data:{track_value:e,token:j.a.get(t),limit:"5",type:"GET"}}).done((function(e){(function(e){var t;t=e&&e.status?e.status:e.status.error.response.status||"401";var n=e.message;if(t&&401==parseInt(t))return alert(n),!1;if(t&&t>=400)return alert(n||"Error: Please try logging in and out again."),!1;return!0})(e)&&y(e.trackResult.tracks.items)}))}(d.query,"arcane-token-key")})),children:Object(b.jsxs)("div",{class:"flex flex-col",children:[Object(b.jsx)("h4",{children:"Search for your top tracks:"}),Object(b.jsx)("p",{class:"text-xs sm:text-sm md:text-base lg:text-lg p-2",children:"Select a track below to add it to your recommendation seeds:"}),Object(b.jsxs)(A.a,{className:"mb-3",children:[Object(b.jsx)(O.a.Control,{required:!0,id:"validationTrack",class:"p-12",name:"query",placeholder:"Enter track name",defaultValue:"",autoComplete:"on",onChange:function(e){u(Object(h.a)(Object(h.a)({},d),{},Object(g.a)({},e.target.name,e.target.value)))}}),Object(b.jsx)(A.a.Append,{children:Object(b.jsx)(o.a,{class:"bg-gray-800",type:"submit",defaultValue:"Submit",variant:"secondary",children:"Submit"})})]})]})}),1==K&&Object(b.jsx)("div",{class:"flex flex-row flex-wrap",children:v.map((function(e){return Object(b.jsx)("div",{class:"container mx-auto w-1/2 lg:w-1/5 md:w-1/3 p-3",children:Object(b.jsxs)("button",{class:"w-full h-full p-4 ring ring-transparent rounded-lg bg-green-800 hover:bg-blue-500 active:bg-indigo-800",onClick:function(){return function(e){var s=!1;t.forEach((function(t){t.id==e.id&&(s=!0)})),t.length<5&&0==s&&n(t,e)}(e)},name:e.name,children:[Object(b.jsx)("img",{src:e.album.images[0].url,class:"object-scale-down"}),Object(b.jsx)("div",{class:"flex flex-row flex-wrap justify-around",children:Object(b.jsxs)("p",{class:"p-1 text-xs sm:text-sm md:text-base lg:text-lg",children:[e.name," ",Object(b.jsx)("br",{})," ",Object(b.jsxs)("i",{children:["by ",e.artists[0].name]})]})})]},e.id)})}))})]})})},y=function(e){var t=e.seedTracks,n=e.deleteSeed;return Object(b.jsx)("div",{children:t.length>0&&Object(b.jsxs)("div",{class:"mx-8 my-20 px-4 py-4 ring ring-transparent rounded-lg bg-green-700",children:[Object(b.jsx)("h2",{children:"Your Seeds are:"}),Object(b.jsxs)("div",{class:"flex flex-row flex-wrap",children:[t.map((function(e){return Object(b.jsx)("div",{class:"container mx-auto w-1/2 lg:w-1/5 md:w-1/3 p-3 h-full",id:"heightgrabber",children:Object(b.jsxs)("button",{name:e.name,class:"w-full h-full p-4 ring ring-transparent rounded-lg bg-green-800 hover:bg-blue-500 active:bg-indigo-800",onClick:function(){return n(t,e)},children:[Object(b.jsx)("img",{src:e.album.images[0].url,class:"object-scale-down"}),Object(b.jsx)("div",{class:"flex flex-row flex-wrap justify-around",children:Object(b.jsxs)("p",{class:"p-1 text-xs sm:text-sm md:text-base lg:text-lg",children:[e.name," ",Object(b.jsx)("br",{})," ",Object(b.jsxs)("i",{children:["by ",e.artists[0].name]})]})})]})},e.id)})),Object(i.a)(Array(5-(t.length||0))).map((function(e){return Object(b.jsx)("div",{class:"container mx-auto w-1/2 lg:w-1/5 md:w-1/3 p-3",children:Object(b.jsxs)("div",{class:"w-full h-full p-4 ring ring-transparent rounded-lg min-h:full bg-green-800",children:[Object(b.jsx)("img",{class:"opacity-0 object-scale-down",src:t[0].album.images[0].url}),Object(b.jsx)("div",{class:"flex flex-row flex-wrap justify-around",children:Object(b.jsxs)("p",{class:"p-1 text-green-800 text-xs sm:text-sm md:text-base lg:text-lg",children:[t[0].name," ",Object(b.jsx)("br",{})," ",Object(b.jsxs)("i",{children:["by ",t[0].artists[0].name]})]})})]})},e)}))]})]})})},w=function(e){var t=e.seedTracks,n=e.recommendations,s=e.updateRecommendations,a=e.deleteRecommendation,r=e.clearRecommendations;function c(e,t){var a,c={limit:"25",seed_tracks:e,token:j.a.get(t)};a="/api/recommendations",p.a.ajax({url:a,dataType:"json",data:c,type:"POST"}).done((function(e){(function(e){var t;t=e&&e.status?e.status:e.status.error.response.status||"401";var n=e.message;if(t&&401==parseInt(t))return alert(n),!1;if(t&&t>=400)return alert(n||"Error: Please try logging in and out again."),!1;return!0})(e)&&(n.length>0&&r(n),e.trackResult.tracks.forEach((function(e){s(n,e)})))}))}return Object(b.jsx)("div",{children:t.length>0&&Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("br",{}),Object(b.jsx)(o.a,{class:"bg-gray-800",variant:"secondary btn-lg",onClick:function(){return c(t.map((function(e){return e.id})),"arcane-token-key")},children:"Get Recommendations!"}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{})]}),Object(b.jsx)("div",{children:n.length>0&&Object(b.jsxs)("div",{class:"mx-8 my-4 px-4 py-4 ring ring-transparent rounded-lg bg-green-700",children:[Object(b.jsx)("p",{class:"text-xs sm:text-sm md:text-base lg:text-lg p-2",children:"If you're not a fan of a recommendation, select to remove it!"}),Object(b.jsx)("div",{class:"flex flex-row flex-wrap",children:n.map((function(e){return Object(b.jsxs)("div",{class:"container mx-auto w-1/2 lg:w-1/5 md:w-1/3 p-3",children:[Object(b.jsxs)("button",{class:"w-full h-full p-4 ring ring-transparent rounded-lg bg-green-800 hover:bg-blue-500 active:bg-indigo-800",onClick:function(){return a(n,e)},children:[Object(b.jsx)("img",{src:e.album.images[0].url,class:"object-scale-down"}),Object(b.jsx)("div",{class:"flex flex-row flex-wrap justify-around",children:Object(b.jsxs)("p",{class:"p-1 text-xs sm:text-sm md:text-base lg:text-lg",children:[e.name," ",Object(b.jsx)("br",{})," ",Object(b.jsxs)("i",{children:["by ",e.artists[0].name]})]})})]},e.id),Object(b.jsx)("br",{})]})}))})]})})]})})},k=function(e){var t=e.seedTracks,n=e.recommendations;function s(e,t,n){var s,a={seedTrack_names:e,token:j.a.get(n)};s="/api/createPlaylist",p.a.ajax({url:s,dataType:"json",data:a,type:"GET"}).done((function(e){if(function(e){var t;t=e&&e.status?e.status:e.status.error.response.status||"401";var n=e.message;if(t&&401==parseInt(t))return alert(n),!1;if(t&&t>=400)return alert(n||"Error: Please try logging in and out again."),!1;return!0}(e)){var s;s="/api/addTracks";var a={recommendation_ids:t,playlist_id:e.data,token:j.a.get(n)};console.log(e.data),p.a.ajax({url:s,dataType:"json",data:a,type:"GET"}).done((function(){alert("Check out Spotify for your new Arcane mix!")}))}}))}return Object(b.jsx)("div",{children:n.length>0&&Object(b.jsxs)("div",{children:[Object(b.jsx)("br",{}),Object(b.jsx)(o.a,{class:"bg-gray-800",variant:"secondary btn-lg",onClick:function(){return s(t.map((function(e){return e.artists[0].name})),n.map((function(e){return e.id})),"arcane-token-key")},children:"Create Playlist!"}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{})]})})},K=n(64);var Z=function(){var e=Object(s.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)([]),c=Object(l.a)(r,2),o=c[0],d=c[1],u="arcane-token-key",g=Object(s.useState)(!1),h=Object(l.a)(g,2),m=h[0],f=h[1],p=Object(s.useState)(""),O=Object(l.a)(p,2),A=O[0],Z=O[1];function T(){void 0==j.a.get(u)||null==j.a.get(u)?f(!1):f(!0)}function C(){for(var e,t={},n=/([^&;=]+)=?([^&;]*)/g,s=window.location.hash.substring(1);e=n.exec(s);)t[e[1]]=decodeURIComponent(e[2]);return t}Object(s.useEffect)((function(){m||j.a.remove(u),T();var e=C(),t=!1;null!=e.access_token&&""!=e.access_token&&(t=!0),0==(void 0!=j.a.get(u)&&null!=j.a.get(u))&&1==t&&function(){j.a.remove(u);var e=C();null!=e.access_token&&""!=e.access_token&&j.a.set(u,e.access_token,{expires:3599/86400})}(),T()}),[]);var S=Object(b.jsxs)("header",{className:"App-header2",children:[Object(b.jsx)(x,{hasLoggedIn:m,setHasLoggedIn:f}),Object(b.jsx)("header",{className:"App-header",children:Object(b.jsxs)("div",{class:"w-11/12",children:[Object(b.jsx)(v,{seedTracks:n,updateSeeds:function(e,t){e.push(t),a(Object(i.a)(e))},hasLoggedIn:m}),Object(b.jsx)(y,{seedTracks:n,deleteSeed:function(e,t){e=K.without(e,t),a(Object(i.a)(e))}}),Object(b.jsx)(w,{seedTracks:n,recommendations:o,updateRecommendations:function(e,t){e.push(t),d(Object(i.a)(e))},deleteRecommendation:function(e,t){e=K.without(e,t),d(Object(i.a)(e))},clearRecommendations:function(e){for(var t=o.length,n=0;n<t;n++)e.pop();d(Object(i.a)(e))}}),Object(b.jsx)(k,{seedTracks:n,recommendations:o})]})})]});return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)("div",{className:function(){if(""==A){var e="App-background"+(t=40,Math.floor(Math.random()*t)).toString();Z(e)}var t;return A}(),children:Object(b.jsx)("div",{class:"overscroll-contain",children:S})})})};c.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(Z,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.7b5dce2c.chunk.js.map